{
  "name": "Jenkins Build Activity",
  "description": "",
  "permissions": "PUBLIC_READ_ONLY",
  "pages": [
    {
      "name": "Jenkins Build Activity",
      "description": "",
      "widgets": [
        {
          "title": "How many builds have we run today vs yesterday?",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 2,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT uniqueCount(buildId) as 'Builds' FROM AppBuildEvent SINCE today COMPARE WITH 1 day ago"
              }
            ]
          }
        },
        {
          "title": "How many builds are we running per application?",
          "layout": {
            "column": 3,
            "row": 1,
            "width": 5,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.area"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT uniqueCount(buildId) as Builds from AppBuildEvent facet jobFullName since today timeseries "
              }
            ]
          }
        },
        {
          "title": "How many minutes are our builds taking on average per application?",
          "layout": {
            "column": 8,
            "row": 1,
            "width": 5,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT average(buildDuration) / 1000 / 60 as 'Minutes' from AppBuildEvent facet jobName TIMESERIES since today"
              }
            ]
          }
        },
        {
          "title": "What percentage of our builds are failing?",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 2,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT percentage(count(*), WHERE buildResult='FAILURE') as 'Failed' FROM AppBuildEvent COMPARE WITH 1 day ago"
              }
            ]
          }
        },
        {
          "title": "Which application builds are failing?",
          "layout": {
            "column": 1,
            "row": 5,
            "width": 5,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT filter(uniqueCount(buildId), WHERE buildEventType='finalized' and buildResult != 'SUCCESS')  as 'Failed' FROM AppBuildEvent FACET jobFullName TIMESERIES since today"
              }
            ]
          }
        },
        {
          "title": "Where are our builds running?",
          "layout": {
            "column": 6,
            "row": 5,
            "width": 4,
            "height": 4
          },
          "linkedEntityGuids": [
            "MjI2NzU4MHxWSVp8REFTSEJPQVJEfDg2NDEwNg"
          ],
          "visualization": {
            "id": "viz.pie"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT uniqueCount(buildId) as Builds from AppBuildEvent facet buildAgentHost since today"
              }
            ]
          }
        },
        {
          "title": "Where are our builds failing?",
          "layout": {
            "column": 10,
            "row": 5,
            "width": 3,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.bar"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT count(*) as 'Builds' FROM AppBuildEvent WHERE buildResult = 'FAILURE' FACET buildAgentHost SINCE today"
              }
            ]
          }
        },
        {
          "title": "How long are builds waiting to execute on average?",
          "layout": {
            "column": 1,
            "row": 9,
            "width": 2,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT average(buildDelay) from AppBuildEvent since today"
              }
            ]
          }
        },
        {
          "title": "Build History",
          "layout": {
            "column": 3,
            "row": 9,
            "width": 10,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT * FROM AppBuildEvent LIMIT 500"
              }
            ]
          }
        },
        {
          "title": "How many deployments have we done today?",
          "layout": {
            "column": 1,
            "row": 13,
            "width": 2,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT count(*) as 'Deployments' FROM AppDeploymentEvent FACET revision since today compare with 1 day ago"
              }
            ]
          }
        },
        {
          "title": "How many deployments have done today vs yesterday?",
          "layout": {
            "column": 3,
            "row": 13,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT count(*) FROM AppDeploymentEvent TIMESERIES"
              }
            ]
          }
        },
        {
          "title": "What versions did we deploy today?",
          "layout": {
            "column": 9,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": account#,
                "query": "SELECT uniques(revision) FROM AppDeployEvent since today"
              }
            ]
          }
        }
      ]
    }
  ]
}
